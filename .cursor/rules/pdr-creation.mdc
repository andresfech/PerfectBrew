---
alwaysApply: false
triggerPhrases:
  - "create a plan"
  - "implementation plan"
  - "create a doc"
  - "start a plan"
  - "PRD"
  - "product requirements"
  - "feature plan"
---

# PRD Creation Rules

## ğŸ¯ Goal: Create comprehensive implementation plans for features

## ğŸ“ PerfectBrew Architecture
- **Frontend**: iOS SwiftUI app with MVVM pattern
- **Models**: Recipe.swift, RecipeDatabase.swift
- **ViewModels**: BrewingGuideViewModel.swift
- **Services**: AudioService.swift, LocalizationManager.swift, SettingsManager.swift
- **Resources**: JSON recipe files (AeroPress, V60, FrenchPress)
- **Audio**: Chatterbox TTS integration for step-by-step narration
- **Storage**: Local JSON files + Core Data for brew history

## ğŸ§© Required Components
- **Summary** â€“ Clear goal statement
- **Gherkin Stories** â€“ Given/When/Then scenarios
- **Affected Files** â€“ Real file paths (use codebase_search first)
- **Git Strategy** â€“ Branch naming, commit checkpoints
- **QA Strategy** â€“ LLM self-test + manual user verification

## ğŸ›  Step 1: Core Areas to Explore
- **Investigation** â€“ What unknowns need resolution?
- **Expected Behavior** â€“ Gherkin stories (Given/When/Then)
- **Core Functionality** â€“ Key user actions
- **Scope/Boundaries** â€“ What this should NOT do
- **File Requirements** â€“ What files need changes?
- **Data Schema** â€“ Backend schema changes needed?
- **Design/UI** â€“ Missing designs or mockups?
- **State/Interactions** â€“ Follow @state-management.md

## ğŸ§­ Step 2: Implementation Plan Components
- **Goals** â€“ What we're achieving and how
- **Gherkin User Stories** â€“ Detailed expected behaviors
- **Functional Requirements** â€“ Measurable, specific functionalities
- **Non-Goals** â€“ Clear scope boundaries
- **Success Metrics** â€“ Measurable outcomes

## ğŸ“‹ Step 3: Execution Checklist
- [ ] **Investigation Complete** â€“ All unknowns resolved
- [ ] **Gherkin Stories Written** â€“ Given/When/Then scenarios defined
- [ ] **Files Identified** â€“ Real file paths using codebase_search
- [ ] **Git Strategy Defined** â€“ Branch naming and commit checkpoints
- [ ] **QA Strategy Planned** â€“ LLM self-test + manual verification
- [ ] **Success Metrics Defined** â€“ Measurable outcomes
- [ ] **Scope Boundaries Clear** â€“ What this should NOT do
- [ ] **Implementation Ready** â€“ All components defined

## ğŸ¯ Trigger Phrases
This rule activates when user mentions:
- "create a plan"
- "implementation plan" 
- "create a doc"
- "start a plan"
- "PRD"
- "product requirements"
- "feature plan"